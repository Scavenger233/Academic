# Lec 10 SQL stored procedures
## PSM persistent stored modules
- Procedure(no return value)
  - ```sql
    CREATE PROCEDURE name(parameter list);
    ```
- Function( with a return value)
  - ```sql
    CREATE FUNCTION name(parameter list)
    RETURN type;
    ```
### Parameters in PSM
- mode-name-type triples
- mode can be:
  - IN : uses value, no value change
  - OUT : no use, procedure changes
  - INOUT: both
 
# Involing procedure
```sql
CALL someProcedure;
```

### Statements in PSM
```sql
--DECLARATION
  DECLARE name type;

  DECLARE total INT;

--BEGIN & END
CREATE FUNCTION CalculateTotal (price DECIMAL, qty INT) RETURNS DECIMAL
  BEGIN
      DECLARE total DECIMAL;
      SET total = price * qty; -- Multiply price and quantity
      RETURN total; -- Set the return value (but function continues)
  END;
--ASSIGNMENT STATEMENT
  SET x = 'Limerick';

--LABEL USE
  BEGIN
    DECLARE x INT DEFAULT 0;

    loop_label: WHILE x < 5 DO
        SET x = x + 1;
        IF x = 3 THEN
            LEAVE loop_label; -- Exit the loop when x = 3
        END IF;
    END WHILE;

  END;

--IF STATEMENT
IF x > 10 THEN
    SET y = 20; -- Executes if x > 10
ELSEIF x = 10 THEN
    SET y = 15; -- Executes if x = 10
ELSE
    SET y = 5; -- Executes if x < 10
END IF;
```

